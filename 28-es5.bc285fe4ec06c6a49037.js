function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,i,t){return i&&_defineProperties(e.prototype,i),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"+fNE":function(e,i,t){"use strict";t.r(i),t.d(i,"ReviewsModule",(function(){return D}));var n=t("2kYt"),r=t("nIj0"),o=t("PCNd"),c=t("3IVO"),a=t("sEIs"),s=t("AytR"),l=t("EM62"),b=t("gS7V"),d=t("MMGj"),u=t("2qjx"),v=t("qgv0"),f=t("Jeh/"),g=t("o44d"),m=t("HvPk"),p=function(e){return{selected:e}};function h(e,i){if(1&e&&(l.Zb(0,"ul",37),l.Zb(1,"li",38),l.Vb(2,"i",39),l.Yb(),l.Yb()),2&e){var t=i.$implicit,n=l.lc().$implicit;l.Ib(1),l.rc("ngClass",l.vc(1,p,t<=n.rating))}}function Y(e,i){if(1&e&&(l.Zb(0,"strong"),l.Lc(1),l.Yb()),2&e){var t=l.lc().$implicit;l.Ib(1),l.Mc(t.name)}}function Z(e,i){if(1&e&&(l.Zb(0,"p"),l.Lc(1),l.Yb()),2&e){var t=l.lc().$implicit;l.Ib(1),l.Mc(t.comment)}}function w(e,i){if(1&e&&(l.Zb(0,"div",27),l.Zb(1,"div",28),l.Zb(2,"div",29),l.Jc(3,h,3,3,"ul",30),l.Yb(),l.Zb(4,"div",31),l.Zb(5,"div",32),l.Vb(6,"img",33),l.Yb(),l.Zb(7,"div",34),l.Jc(8,Y,2,1,"strong",35),l.Zb(9,"div",36),l.Lc(10,"26.03.2019"),l.Yb(),l.Yb(),l.Yb(),l.Jc(11,Z,2,1,"p",35),l.Yb(),l.Yb()),2&e){var t=i.$implicit,n=l.lc();l.Ib(3),l.rc("ngForOf",n.stars),l.Ib(5),l.rc("ngIf",t.name),l.Ib(3),l.rc("ngIf",t.comment)}}function I(e,i){1&e&&(l.Zb(0,"div",40),l.Zb(1,"div",41),l.Vb(2,"img",42),l.Yb(),l.Zb(3,"div",43),l.Zb(4,"div",44),l.Lc(5,"L"),l.Yb(),l.Zb(6,"div",44),l.Lc(7,"o"),l.Yb(),l.Zb(8,"div",44),l.Lc(9,"a"),l.Yb(),l.Zb(10,"div",44),l.Lc(11,"d"),l.Yb(),l.Zb(12,"div",44),l.Lc(13,"i"),l.Yb(),l.Zb(14,"div",44),l.Lc(15,"n"),l.Yb(),l.Zb(16,"div",44),l.Lc(17,"g"),l.Yb(),l.Zb(18,"div",44),l.Lc(19,"."),l.Yb(),l.Zb(20,"div",44),l.Lc(21,"."),l.Yb(),l.Zb(22,"div",44),l.Lc(23,"."),l.Yb(),l.Yb(),l.Yb())}function y(e,i){1&e&&(l.Zb(0,"div",8),l.Zb(1,"div",9),l.Zb(2,"div",45),l.Zb(3,"h5"),l.Lc(4,"Reviews not found."),l.Yb(),l.Yb(),l.Yb(),l.Yb())}function C(e,i){if(1&e){var t=l.ac();l.Zb(0,"ul",64),l.Zb(1,"li",65),l.hc("click",(function(){l.Cc(t);var e=i.$implicit;return l.lc(2).countStar(e)})),l.Vb(2,"i",39),l.Yb(),l.Yb()}if(2&e){var n=i.$implicit,r=l.lc(2);l.Ib(1),l.rc("ngClass",l.vc(1,p,n<=r.selectedValue))}}function k(e,i){if(1&e&&(l.Zb(0,"option",66),l.Lc(1),l.Yb()),2&e){var t=i.$implicit;l.sc("value",t.id),l.Ib(1),l.Mc(t.name)}}function L(e,i){1&e&&(l.Zb(0,"div"),l.Lc(1,"Product is required"),l.Yb())}function P(e,i){if(1&e&&(l.Zb(0,"div",67),l.Jc(1,L,2,0,"div",35),l.Yb()),2&e){var t=l.lc(2);l.Ib(1),l.rc("ngIf",t.f.productId.errors.required)}}function R(e,i){1&e&&(l.Zb(0,"div"),l.Lc(1,"Name is required"),l.Yb())}function S(e,i){if(1&e&&(l.Zb(0,"div",67),l.Jc(1,R,2,0,"div",35),l.Yb()),2&e){var t=l.lc(2);l.Ib(1),l.rc("ngIf",t.f.name.errors.required)}}function x(e,i){1&e&&(l.Zb(0,"div"),l.Lc(1,"Comment is required"),l.Yb())}function _(e,i){if(1&e&&(l.Zb(0,"div",67),l.Jc(1,x,2,0,"div",35),l.Yb()),2&e){var t=l.lc(2);l.Ib(1),l.rc("ngIf",t.f.comment.errors.required)}}var F=function(e){return{"is-invalid":e}};function O(e,i){if(1&e){var t=l.ac();l.Zb(0,"div",46),l.Zb(1,"div",47),l.Zb(2,"h5",48),l.Lc(3,"Submit Your Review"),l.Yb(),l.Zb(4,"button",49),l.hc("click",(function(){return l.Cc(t),l.lc().modalRef.hide()})),l.Zb(5,"span",50),l.Lc(6,"\xd7"),l.Yb(),l.Yb(),l.Yb(),l.Zb(7,"form",51),l.hc("ngSubmit",(function(){return l.Cc(t),l.lc().onaddReviewSubmit()})),l.Zb(8,"div",52),l.Zb(9,"div",29),l.Jc(10,C,3,3,"ul",53),l.Yb(),l.Zb(11,"div",54),l.Zb(12,"select",55),l.Zb(13,"option",56),l.Lc(14,"Select Product"),l.Yb(),l.Jc(15,k,2,2,"option",57),l.Yb(),l.Jc(16,P,2,1,"div",58),l.Yb(),l.Zb(17,"div",54),l.Vb(18,"input",59),l.Jc(19,S,2,1,"div",58),l.Yb(),l.Zb(20,"div",54),l.Vb(21,"textarea",60),l.Jc(22,_,2,1,"div",58),l.Yb(),l.Yb(),l.Zb(23,"div",61),l.Zb(24,"button",62),l.hc("click",(function(){return l.Cc(t),l.lc().modalRef.hide()})),l.Lc(25,"Cancle"),l.Yb(),l.Zb(26,"button",63),l.Lc(27,"Submit"),l.Yb(),l.Yb(),l.Yb(),l.Yb()}if(2&e){var n=l.lc();l.Ib(7),l.rc("formGroup",n.addReviewForm),l.Ib(3),l.rc("ngForOf",n.stars),l.Ib(2),l.rc("ngClass",l.vc(9,F,n.submitted&&n.f.productId.errors)),l.Ib(3),l.rc("ngForOf",n.productsList),l.Ib(1),l.rc("ngIf",n.submitted&&n.f.productId.errors),l.Ib(2),l.rc("ngClass",l.vc(11,F,n.submitted&&n.f.name.errors)),l.Ib(1),l.rc("ngIf",n.submitted&&n.f.name.errors),l.Ib(2),l.rc("ngClass",l.vc(13,F,n.submitted&&n.f.comment.errors)),l.Ib(1),l.rc("ngIf",n.submitted&&n.f.comment.errors)}}var V,J,j,M=[{path:"",children:[{path:"",component:(V=function(){function e(i,t,n,r,o,c,a,l){_classCallCheck(this,e),this.spinner=i,this._reviews=t,this._route=n,this._router=r,this.formBuilder=o,this.modalService=c,this._products=a,this.toastr=l,this.stars=[1,2,3,4,5],this.parameters={},this.currentPage=0,this.notEmptyPost=!0,this.notScrolly=!0,this.loadingImage=!1,this.reviewsData=[],this.topProductCategories=[],this.productsList=[],this.apiUrl=s.a.apiUrl,this.defaultImage="assets/images/defaultProfile.png",this.submitted=!1,this.buttonLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.spinner.show(),this.currentPage=0,this.notEmptyPost=!0,this.notScrolly=!0,this.loadingImage=!1,this.loadInitPost(),this._products.getAllProducts().subscribe((function(i){i.data&&(e.productsList=i.data)}),(function(e){console.log(e)})),this.addReviewForm=this.formBuilder.group({comment:["",[r.p.required]],name:["",[r.p.required]],productId:["",[r.p.required]]})}},{key:"loadInitPost",value:function(){var e=this;this._reviews.getAllReviews({parameters:this.parameters,currentPage:this.currentPage}).subscribe((function(i){e.spinner.hide(),i.data&&(e.reviewsData=i.data)}),(function(i){e.spinner.hide(),console.log(i)}))}},{key:"onScroll",value:function(){this.notEmptyPost&&this.notScrolly&&(this.loadingImage=!0,this.notScrolly=!1,this.currentPage++,this.loadNextData())}},{key:"loadNextData",value:function(){var e=this;this._reviews.getAllReviews({parameters:this.parameters,currentPage:this.currentPage}).subscribe((function(i){var t=i.data;console.log("newProductData===",t),e.loadingImage=!1,0===t.length&&(e.notEmptyPost=!1),e.reviewsData=e.reviewsData.concat(t),e.notScrolly=!0}),(function(e){console.log(e)}))}},{key:"ngAfterViewInit",value:function(){window.scrollTo(0,0)}},{key:"openEditProfile",value:function(e){this.modalRef=this.modalService.show(e,Object.assign({},{class:"gray modal-md"}))}},{key:"onaddReviewSubmit",value:function(){var e=this;if(this.submitted=!0,!this.addReviewForm.invalid){var i={product_id:this.addReviewForm.value.productId,name:this.addReviewForm.value.name,comment:this.addReviewForm.value.comment,rating:this.selectedValue};this.buttonLoading=!0,this._reviews.addReview(i).subscribe((function(i){e.buttonLoading=!1,"success"==i.status&&(e.modalRef.hide(),e.toastr.success(i.message,"Success",{timeOut:4e3,closeButton:!0}),e._router.navigate([]))}),(function(i){var t;e.buttonLoading=!1,t="string"==typeof i?i:"object"==typeof i?i.error.message:"Something went wrong",e.toastr.error(t,"Error",{timeOut:4e3,closeButton:!0})})),console.log("this.addReviewForm====",this.addReviewForm.value)}}},{key:"countStar",value:function(e){this.selectedValue=this.selectedValue==e?0:e,console.log("Value of star",e)}},{key:"f",get:function(){return this.addReviewForm.controls}}]),e}(),V.\u0275fac=function(e){return new(e||V)(l.Ub(c.c),l.Ub(b.a),l.Ub(a.a),l.Ub(a.c),l.Ub(r.c),l.Ub(d.a),l.Ub(u.a),l.Ub(v.c))},V.\u0275cmp=l.Ob({type:V,selectors:[["app-reviews"]],decls:41,vars:5,consts:[["bdColor","rgb(255 255 255 / 95%)"],[1,"preloader"],[1,"preloader-body"],["src","assets/images/loader-page.svg"],["width","100","height","100","viewBox","0 0 40 40"],["points","0 0 0 40 40 40 40 0",1,"rect"],[1,"page-header","text-center",2,"background-image","url(assets/images/bg-rating-reviews.jpg)"],[1,"container"],[1,"row"],[1,"col-12"],[1,"page-heading-breadcrumb"],[1,"breadcrumb","justify-content-center"],[1,"breadcrumb-item"],["routerLink","/"],["aria-current","page",1,"breadcrumb-item","active"],[1,"rating-review-wrap","sec-ptb"],[1,"col-xl-6","text-center","text-xl-left"],["href","javascript:void(0)"],["src","assets/images/keen-logo.svg"],[1,"col-xl-6","d-xl-flex","justify-content-xl-end","align-items-xl-center","text-center"],["href","javascript:void(0)",1,"btn","btn-orange","text-uppercase","submit-review",3,"click"],["infiniteScroll","",1,"grid",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[1,"grid-sizer"],["class","grid-item",4,"ngFor","ngForOf"],["class","loading-wrap text-center",4,"ngIf"],["class","row",4,"ngIf"],["editProfileTemplate",""],[1,"grid-item"],[1,"testimonial-bx"],[1,"star-rating"],["class","list-inline rating-list","style","display: inline-block",4,"ngFor","ngForOf"],[1,"user-info-bx"],[1,"user-img"],["src","assets/images/defaultProfile.png"],[1,"user-info-right"],[4,"ngIf"],[1,"date"],[1,"list-inline","rating-list",2,"display","inline-block"],[3,"ngClass"],[1,"fa","fa-star"],[1,"loading-wrap","text-center"],[1,"loading-icon"],["src","assets/images/loading-icon.png","alt",""],[1,"loading"],[1,"loading__letter"],[1,"sec-heading","mt-5","mb-3"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"form",3,"formGroup","ngSubmit"],[1,"modal-body"],["class","list-inline rating-list cursorpointer","style","display: inline-block",4,"ngFor","ngForOf"],[1,"form-group"],["formControlName","productId","title","Product",1,"form-control",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Enter Your Name","formControlName","name",1,"form-control",3,"ngClass"],["placeholder","Enter Your Comment","formControlName","comment",1,"form-control",3,"ngClass"],[1,"modal-footer"],["type","button",1,"btn","btn-white","text-uppercase",3,"click"],["type","submit",1,"btn","btn-orange","text-uppercase"],[1,"list-inline","rating-list","cursorpointer",2,"display","inline-block"],[3,"ngClass","click"],[3,"value"],[1,"invalid-feedback"]],template:function(e,i){if(1&e){var t=l.ac();l.Zb(0,"ngx-spinner",0),l.Zb(1,"div",1),l.Zb(2,"div",2),l.Vb(3,"img",3),l.kc(),l.Zb(4,"svg",4),l.Vb(5,"polygon",5),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.jc(),l.Zb(6,"div",6),l.Zb(7,"div",7),l.Zb(8,"div",8),l.Zb(9,"div",9),l.Zb(10,"h2"),l.Lc(11,"Ratings and reviews"),l.Yb(),l.Zb(12,"div",10),l.Zb(13,"ol",11),l.Zb(14,"li",12),l.Zb(15,"a",13),l.Lc(16,"Home"),l.Yb(),l.Yb(),l.Zb(17,"li",14),l.Lc(18,"Rating and Reviews"),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Vb(19,"app-static-links"),l.Zb(20,"div",15),l.Zb(21,"div",7),l.Zb(22,"div",8),l.Zb(23,"div",16),l.Zb(24,"a",17),l.Vb(25,"img",18),l.Yb(),l.Yb(),l.Zb(26,"div",19),l.Zb(27,"a",20),l.hc("click",(function(){l.Cc(t);var e=l.Ac(40);return i.openEditProfile(e)})),l.Lc(28,"Submit your review"),l.Yb(),l.Yb(),l.Yb(),l.Zb(29,"div",8),l.Zb(30,"div",9),l.Zb(31,"div",21),l.hc("scrolled",(function(){return i.onScroll()})),l.Vb(32,"div",22),l.Jc(33,w,12,3,"div",23),l.Yb(),l.Yb(),l.Yb(),l.Zb(34,"div",8),l.Zb(35,"div",9),l.Jc(36,I,24,0,"div",24),l.Yb(),l.Yb(),l.Jc(37,y,5,0,"div",25),l.Yb(),l.Yb(),l.Vb(38,"app-nearest-location"),l.Jc(39,O,28,15,"ng-template",null,26,l.Kc)}2&e&&(l.Ib(31),l.rc("infiniteScrollDistance",2)("infiniteScrollThrottle",50),l.Ib(2),l.rc("ngForOf",i.reviewsData),l.Ib(3),l.rc("ngIf",i.loadingImage),l.Ib(1),l.rc("ngIf",0==i.reviewsData.length))},directives:[c.a,a.e,f.a,g.a,n.l,n.m,m.a,n.k,r.r,r.j,r.e,r.o,r.i,r.d,r.k,r.q,r.b],styles:[".rating-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#ddd;padding:0 4px}.rating-list[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{color:#e15c16}.cursorpointer[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}"]}),V)}]}],E=((J=function e(){_classCallCheck(this,e)}).\u0275mod=l.Sb({type:J}),J.\u0275inj=l.Rb({factory:function(e){return new(e||J)},imports:[[a.f.forChild(M)],a.f]}),J),q=t("iNDR"),D=((j=function e(){_classCallCheck(this,e),console.log("ReviewsModule")}).\u0275mod=l.Sb({type:j}),j.\u0275inj=l.Rb({factory:function(e){return new(e||j)},providers:[],imports:[[n.c,r.n,r.f,o.a,E,c.b,q.a,g.b,d.b.forRoot()]]}),j)}}]);